


<iframe id="dashboard" src="" width="100%" height="1200" frameborder="0"></iframe>

<script>
    
    cardTemplate = {
        
        initDashboard: function() {
            let grafanaTheme = "dark";
            let opfabTheme = document.body.getAttribute("opfab-theme");
            if (opfabTheme == "DAY") 
                grafanaTheme="light";

            let source = "{{{card.data.url}}}&theme="+grafanaTheme;
            document.getElementById('dashboard').setAttribute("src", encodeURI(source));
            
        }
    }
    cardTemplate.initDashboard();
    opfab.currentCard.listenToStyleChange(() => {
        cardTemplate.initDashboard();
    });

</script>